package com.cgi.fuse;

import org.apache.camel.Exchange;
import org.apache.camel.builder.RouteBuilder;

public class FuseAPIRoute extends RouteBuilder {

	@Override
	public void configure() throws Exception {
		
		from("direct:getRestFromExternalService")
			.setHeader(Exchange.HTTP_METHOD, simple("GET"))
			.to("http://gturnquist-quoters.cfapps.io/api/random")			
			.to("direct:result");
		from("direct:getAnotherRest")
			.setHeader(Exchange.HTTP_METHOD, simple("GET"))
			.to("http://maps.googleapis.com/maps/api/geocode/json?address=stockholm,sweden")
			.to("direct:result");
		
		from("mock:result")
			.aggregate(, new StringAggregationStrategy()).completionSize(2)
			.log("Sending out concat APIs")
			.to("mock:aggregated");
	
		
		/*
		from("direct:getRestFromExternalService")
		.setHeader(Exchange.HTTP_METHOD, simple("GET"))
		.to("http://gturnquist-quoters.cfapps.io/api/random");
		*/
		
	}
}
