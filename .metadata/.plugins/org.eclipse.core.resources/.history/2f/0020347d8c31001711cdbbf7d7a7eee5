package com.cgi.fuse;

import org.apache.camel.Exchange;
import org.apache.camel.builder.RouteBuilder;

public class FuseAPIRoute extends RouteBuilder {

	@Override
	public void configure() throws Exception {

		from("direct:getRestFromExternalService")
			.setHeader(Exchange.HTTP_METHOD, simple("GET"))
			.to("http://gturnquist-quoters.cfapps.io/api/random")			
			.to("mock:result");
		from("direct:anotherRest")
			.setHeader(Exchange.HTTP_METHOD, simple("GET"))
			.to("http://maps.googleapis.com/maps/api/geocode/json?address=stockholm,sweden")
			.to("mock:result");
		
		from("mock:result")
			.aggregate(new StringAggregationStrategy()).completionSize(2).ignoreInvalidCorrelationKeys()
			.log("Sending out concat APIs")
			.to("mock:aggregated");
	}
}
